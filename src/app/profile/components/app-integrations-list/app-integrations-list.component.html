<main>
	<form-message></form-message>

	<div class="topbar">
		<div class="l-containerxaxis">
			<div class="topbar-x-heading">
				App Integrations
			</div>
			<div class="topbar-x-subheading">
				You've authorized access to your {{configService.theme['serviceName'] || "Badgr"}} account for the apps and sites listed below.
			</div>
		</div>
	</div>

	<div class="l-containerhorizontal l-containervertical l-containervertical-small l-childrenvertical wrap"
			 *bgAwaitPromises="[ appIntegrationsSet.loadedPromise ]">

		<div class="l-grid l-grid-cards l-containeryaxis">
			<!-- Custom Integrations -->
			<div *ngFor="let integration of appIntegrationsSet">
				<div class="card card-largeimage">
					<a class="card-x-main"
						 [routerLink]="integration.integrationUid
						       ? ['/profile/app-integrations/app/', integration.integrationType, integration.integrationUid]
						       : ['/profile/app-integrations/app/', integration.integrationType]
						  ">
						<div class="card-x-image">
							<img [src]="integration.image" width="80" alt="Canvas Logo">
						</div>
						<div class="card-x-text">
							<h1 id="heading-card-01">{{ integration.name }}</h1>
							<p>{{ integration.description }}</p>
						</div>
					</a>
					<div class="card-x-actions">
						<span>{{ integration.active ? 'Active' : 'Inactive' }}</span>
					</div>
				</div>
			</div>

			<!-- OAuth Integrations -->
			<div *ngFor="let app of oAuthApps">
				<div class="card card-largeimage">
					<a class="card-x-main"
						 [routerLink]="['/profile/app-integrations/oauth-app/', app.entityId] ">
						<div class="card-x-image">
							<img [src]="app.imageUrl" width="80" alt="{{ app.name }} Logo">
						</div>
						<div class="card-x-text">
							<h1 id="appCardTitle-{{ app.entityId }}">{{ app.name }}</h1>
							<p>This application has been granted permission to sign you in using your {{configService.theme['serviceName'] || "Badgr"}} account.</p>
						</div>
					</a>
					<div class="card-x-actions">
						<span>Authorized: <strong><time [date]="app.createdDate" format="mediumDate"></time></strong></span>
						<button class="button button-secondaryghost"
										type="button"
										attr.aria-labelledby="appCardTitle-{{ app.entityId }}"
										(click)="revokeApp(app)"
						>Revoke</button>
					</div>
				</div>
			</div>
		</div>
	</div>
</main>
